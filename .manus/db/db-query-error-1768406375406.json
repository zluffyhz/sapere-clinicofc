{
  "query": "\n-- Atualizar dados do paciente Miguel\nUPDATE patient_data pd\nJOIN patients p ON p.id = pd.patientId\nSET \n  pd.mainComplaints = 'Dificuldade na articulação de fonemas /r/ e /l/. Apresenta trocas fonológicas frequentes na fala espontânea.',\n  pd.allergies = 'Nenhuma alergia conhecida',\n  pd.currentMedications = 'Não faz uso de medicação contínua',\n  pd.therapyGoals = '1. Melhorar articulação dos fonemas /r/ e /l/\\n2. Ampliar vocabulário expressivo\\n3. Desenvolver consciência fonológica\\n4. Fortalecer musculatura orofacial',\n  pd.additionalNotes = 'Criança muito colaborativa e participativa. Família engajada no processo terapêutico. Realiza exercícios em casa conforme orientação. Demonstra evolução significativa desde o início do tratamento.',\n  pd.updatedAt = NOW()\nWHERE p.name = 'Miguel Santos Silva';\n\n-- Adicionar registros de sessão\nINSERT INTO sessionRecords (patientId, appointmentId, therapistUserId, sessionDate, sessionSummary, patientMood, patientBehavior, goalsAchieved, nextSessionPlan, createdAt, updatedAt)\nSELECT \n  p.id,\n  (SELECT MIN(id) FROM appointments WHERE patientId = p.id),\n  1,\n  '2026-01-07',\n  'Sessão focada em exercícios de articulação do fonema /r/. Miguel demonstrou boa compreensão das atividades propostas e participou ativamente. Realizamos exercícios de sopro com canudinho, atividades com espelho para consciência articulatória e jogos de memória fonológica.',\n  'muito_bem',\n  'Criança colaborativa, manteve atenção durante toda a sessão',\n  'Evolução positiva na produção do fonema /r/ em posição inicial. Conseguiu produzir corretamente em 8 de 10 tentativas.',\n  'Continuar trabalho com encontros consonantais. Introduzir atividades lúdicas com palavras complexas.',\n  NOW(),\n  NOW()\nFROM patients p\nWHERE p.name = 'Miguel Santos Silva'\nLIMIT 1;\n\nINSERT INTO sessionRecords (patientId, appointmentId, therapistUserId, sessionDate, sessionSummary, patientMood, patientBehavior, goalsAchieved, nextSessionPlan, createdAt, updatedAt)\nSELECT \n  p.id,\n  (SELECT MIN(id) FROM appointments WHERE patientId = p.id),\n  1,\n  '2025-12-20',\n  'Revisão dos progressos do mês. Miguel mostrou avanços significativos na produção de sons trabalhados. Realizamos avaliação informal da fala espontânea, jogos de nomeação rápida e atividades de discriminação auditiva.',\n  'bem',\n  'Tranquilo e concentrado',\n  'Melhora de aproximadamente 70% na articulação dos fonemas-alvo. Família relata que a fala está mais inteligível no dia a dia.',\n  'Manter exercícios de generalização. Trabalhar contextos de fala mais complexos.',\n  NOW(),\n  NOW()\nFROM patients p\nWHERE p.name = 'Miguel Santos Silva'\nLIMIT 1;\n\n-- Adicionar registros de presença\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2026-01-07', 'present', 'Chegou no horário. Muito participativo na sessão.', 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-12-20', 'present', 'Última sessão do ano. Família muito satisfeita com os progressos.', 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-12-13', 'present', NULL, 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-12-06', 'present', NULL, 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-11-29', 'present', NULL, 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-11-22', 'absent', 'Família avisou com antecedência. Criança com febre.', 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-11-15', 'present', NULL, 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-11-08', 'present', NULL, 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 4EhbpnytSh9u8Li.77fae6186695 --database EGarZwiW5PSBt7KQSMeJXj --execute \n-- Atualizar dados do paciente Miguel\nUPDATE patient_data pd\nJOIN patients p ON p.id = pd.patientId\nSET \n  pd.mainComplaints = 'Dificuldade na articulação de fonemas /r/ e /l/. Apresenta trocas fonológicas frequentes na fala espontânea.',\n  pd.allergies = 'Nenhuma alergia conhecida',\n  pd.currentMedications = 'Não faz uso de medicação contínua',\n  pd.therapyGoals = '1. Melhorar articulação dos fonemas /r/ e /l/\\n2. Ampliar vocabulário expressivo\\n3. Desenvolver consciência fonológica\\n4. Fortalecer musculatura orofacial',\n  pd.additionalNotes = 'Criança muito colaborativa e participativa. Família engajada no processo terapêutico. Realiza exercícios em casa conforme orientação. Demonstra evolução significativa desde o início do tratamento.',\n  pd.updatedAt = NOW()\nWHERE p.name = 'Miguel Santos Silva';\n\n-- Adicionar registros de sessão\nINSERT INTO sessionRecords (patientId, appointmentId, therapistUserId, sessionDate, sessionSummary, patientMood, patientBehavior, goalsAchieved, nextSessionPlan, createdAt, updatedAt)\nSELECT \n  p.id,\n  (SELECT MIN(id) FROM appointments WHERE patientId = p.id),\n  1,\n  '2026-01-07',\n  'Sessão focada em exercícios de articulação do fonema /r/. Miguel demonstrou boa compreensão das atividades propostas e participou ativamente. Realizamos exercícios de sopro com canudinho, atividades com espelho para consciência articulatória e jogos de memória fonológica.',\n  'muito_bem',\n  'Criança colaborativa, manteve atenção durante toda a sessão',\n  'Evolução positiva na produção do fonema /r/ em posição inicial. Conseguiu produzir corretamente em 8 de 10 tentativas.',\n  'Continuar trabalho com encontros consonantais. Introduzir atividades lúdicas com palavras complexas.',\n  NOW(),\n  NOW()\nFROM patients p\nWHERE p.name = 'Miguel Santos Silva'\nLIMIT 1;\n\nINSERT INTO sessionRecords (patientId, appointmentId, therapistUserId, sessionDate, sessionSummary, patientMood, patientBehavior, goalsAchieved, nextSessionPlan, createdAt, updatedAt)\nSELECT \n  p.id,\n  (SELECT MIN(id) FROM appointments WHERE patientId = p.id),\n  1,\n  '2025-12-20',\n  'Revisão dos progressos do mês. Miguel mostrou avanços significativos na produção de sons trabalhados. Realizamos avaliação informal da fala espontânea, jogos de nomeação rápida e atividades de discriminação auditiva.',\n  'bem',\n  'Tranquilo e concentrado',\n  'Melhora de aproximadamente 70% na articulação dos fonemas-alvo. Família relata que a fala está mais inteligível no dia a dia.',\n  'Manter exercícios de generalização. Trabalhar contextos de fala mais complexos.',\n  NOW(),\n  NOW()\nFROM patients p\nWHERE p.name = 'Miguel Santos Silva'\nLIMIT 1;\n\n-- Adicionar registros de presença\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2026-01-07', 'present', 'Chegou no horário. Muito participativo na sessão.', 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-12-20', 'present', 'Última sessão do ano. Família muito satisfeita com os progressos.', 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-12-13', 'present', NULL, 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-12-06', 'present', NULL, 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-11-29', 'present', NULL, 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-11-22', 'absent', 'Família avisou com antecedência. Criança com febre.', 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-11-15', 'present', NULL, 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n\nINSERT INTO attendance (patientId, appointmentDate, status, observations, markedBy, createdAt, updatedAt)\nSELECT p.id, '2025-11-08', 'present', NULL, 1, NOW(), NOW()\nFROM patients p WHERE p.name = 'Miguel Santos Silva' LIMIT 1;\n",
  "returncode": 1,
  "logs": [
    "ERROR 1054 (42S22) at line 50: Unknown column 'appointmentDate' in 'field list'"
  ]
}